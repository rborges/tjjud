<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Livros</title>
  <link href="assets/css/style.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
</head>

<body>
  <div class="container-scroller d-flex">
    <nav class="sidebar sidebar-offcanvas" id="sidebar">
      <ul class="nav">
        <li class="nav-item"><a class="nav-link" href="books.html"><i class="bi bi-book nav-icon"></i><span
              class="menu-title">Livros</span></a></li>
        <li class="nav-item"><a class="nav-link" href="authors.html"><i class="bi bi-person nav-icon"></i><span
              class="menu-title">Autores</span></a></li>
        <li class="nav-item"><a class="nav-link" href="subjects.html"><i class="bi bi-tag nav-icon"></i><span
              class="menu-title">Assuntos</span></a></li>
        <li class="nav-item"><a class="nav-link" href="report.html"><i
              class="bi bi-file-earmark-text nav-icon"></i><span class="menu-title">Relatório</span></a></li>
      </ul>
    </nav>

    <div class="main-panel flex-grow-1">
      <div class="content-wrapper">
        <div class="page-header">
          <h3 class="page-title"> Documentação Técnica</h3>
        </div>
        <div id="content">
          <hr class="my-5" />
          <div class="container">
            <h5 class="mt-4">Tecnologias Utilizadas</h5>
            <ul>
              <li><strong>Backend:</strong> Lumen 10.0.+ (Micro-framework Laravel)</li>
              <li><strong>Linguagem:</strong> PHP 8.3.22</li>
              <li><strong>Frontend:</strong> HTML5, Bootstrap Icons, Axios (JS)</li>
              <li><strong>Banco de Dados:</strong> MySQL 8 (via Docker)</li>
              <li><strong>PDF:</strong> domPDF com Barryvdh\DomPDF</li>
              <li><strong>Testes:</strong> PHPUnit 10</li>
              <li><strong>Ambiente:</strong> Docker + Docker Compose</li>
            </ul>

            <h5 class="mt-4">Arquitetura e Camadas</h5>
            <ul>
              <li><strong>Controllers:</strong> Responsáveis por receber a requisição HTTP e delegar para o Service
                correspondente.</li>
              <li><strong>Services:</strong> Contêm a regra de negócio e usam os Repositories para acesso aos dados.
              </li>
              <li><strong>DTOs:</strong> Transferem dados entre camada de entrada e service, garantindo coesão e
                imutabilidade dos dados.</li>
              <li><strong>Repositories:</strong> Isolam a persistência de dados e encapsulam Eloquent.</li>
              <li><strong>Requests:</strong> Validação desacoplada da lógica de controller, usando `Validator::make()`.
              </li>
              <li><strong>Resources:</strong> Normalizam e organizam o retorno JSON.</li>
            </ul>

            <h5 class="mt-4">Estrutura de Diretórios (Simplificada)</h5>
            <pre><code>app/
├── Domains/
│   ├── Book/
│   │   ├── Controllers/
│   │   ├── DTO/
│   │   ├── Requests/
│   │   ├── Services/
│   │   └── Repositories/
│   ├── Author/
│   └── Subject/
├── Http/
│   ├── Controllers/
│   └── Resources/
└── Models/
tests/
└── Unit/
    └── Services/
</code></pre>

            <h5 class="mt-4">Subindo o Projeto com Docker</h5>
            <pre><code># Subir containers
docker-compose up -d

# Ver containers ativos
docker ps

# Acessar o container do app
docker exec -it &lt;CONTAINER_ID ou NOME&gt; bash

# Exemplo:
docker exec -it lumen_app bash
</code></pre>

            <h5 class="mt-4">Rodando os Testes</h5>
            <pre><code># Dentro do container
./vendor/bin/phpunit --filter SubjectServiceTest
./vendor/bin/phpunit --filter BookServiceTest
./vendor/bin/phpunit --filter AuthorServiceTest
</code></pre>

            <h5 class="mt-4">Relatórios PDF</h5>
            <ul>
              <li>A geração de relatórios PDF é feita via <code>Barryvdh\DomPDF</code>.</li>
              <li>Rota: <code>GET /relatorio/pdf</code> → abre PDF gerado com base na view
                <code>resources/views/report.blade.php</code>.
              </li>
              <li>PDF salvo em: <code>storage/app/relatorios/relatorio-livros.pdf</code></li>
            </ul>

            <h5 class="mt-4">Validações</h5>
            <ul>
              <li>Realizadas por classes especializadas como <code>CreateBookRequest</code> e
                <code>UpdateBookRequest</code>.
              </li>
              <li>Validação acontece antes do DTO ser criado e passado ao service.</li>
            </ul>

            <h5 class="mt-4">Observações</h5>
            <ul>
              <li>Seguindo princípios de Clean Architecture: cada camada tem uma responsabilidade clara.</li>
              <li>Pronto para testes unitários isolados com mocks dos repositórios.</li>
            </ul>
          </div>

        </div>
      </div>
    </div>
  </div>

  <script src="assets/vendors/js/vendor.bundle.base.js"></script>
  <script src="assets/js/off-canvas.js"></script>
  <script src="assets/js/hoverable-collapse.js"></script>

</body>

</html>